CREATE DATABASE sopramon COLLATE utf8_general_ci;
​
USE sopramon;
​
CREATE TABLE administrateur (
 ADM_ID INT NOT NULL
) ENGINE = InnoDb;
​
CREATE TABLE utilisateur (
 UT_ID INT NOT NULL AUTO_INCREMENT,
 UT_NOM VARCHAR(100) NOT NULL,
 UT_PRENOM VARCHAR(100) NOT NULL,
 UT_USERNAME VARCHAR(100) NOT NULL,
 UT_PASSWORD VARCHAR(100) NOT NULL,
 PRIMARY KEY (UT_ID)
) ENGINE = InnoDb;
​
CREATE TABLE boss (
 BOSS_ID INT NOT NULL AUTO_INCREMENT,
 BOSS_NOM VARCHAR(100) NOT NULL,
 BOSS_TYPE VARCHAR(100) NOT NULL,
 BOSS_NIVEAU INT NOT NULL,
 BOSS_CAPACITE_ID INT NOT NULL,
 BOSS_COUP_ID INT NOT NULL,
 PRIMARY KEY (BOSS_ID)
) ENGINE = InnoDb;
​
CREATE TABLE sopramon (
 SOP_ID INT NOT NULL AUTO_INCREMENT,
 SOP_NOM VARCHAR(100) NOT NULL,
 SOP_DATENAIS DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
 SOP_EXPERIENCE INT DEFAULT 0,
 SOP_NIVEAU INT DEFAULT 1,
 SOP_ARGENT INT DEFAULT 0,
 SOP_CAPACITE_ID INT NOT NULL,
 SOP_UT_ID INT NOT NULL,
 SOP_SIGNE_ID INT NOT NULL,
 SOP_COUP_ID INT NOT NULL,
 PRIMARY KEY (SOP_ID)
) ENGINE = InnoDb;
​
CREATE TABLE capacite(
 CAP_ID INT NOT NULL AUTO_INCREMENT,
 CAP_POINTVIE INT NOT NULL,
 CAP_ATTAQUE INT NOT NULL,
 CAP_DEFENSE INT NOT NULL,
 CAP_ESQUIVE INT NOT NULL,
 CAP_VITESSE INT NOT NULL,
 CAP_ITEM_ID INT NOT NULL,
 PRIMARY KEY (CAP_ID)
) ENGINE = InnoDb;
​
CREATE TABLE combat(
 COM_ID INT NOT NULL AUTO_INCREMENT,
 COM_DATE DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
 COM_ARENE VARCHAR(100) NOT NULL,
 COM_TYPE VARCHAR(100) NOT NULL,
 COM_TOURS INT NOT NULL DEFAULT 0,
 COM_DUEL BOOLEAN DEFAULT false,
 COM_SOPRAMON_ID INT NOT NULL,
 COM_BOSS_ID INT NOT NULL,
 COM_COUP_ID INT NOT NULL,
 PRIMARY KEY (COM_ID)
) ENGINE = InnoDb;
​
CREATE TABLE coup(
 COU_ID INT NOT NULL AUTO_INCREMENT,
 COU_DATE DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
 COU_DEGATS INT NOT NULL DEFAULT 0,
 COU_PERSISTENCE INT NOT NULL DEFAULT 0,
 PRIMARY KEY (COU_ID)
) ENGINE = InnoDb;

CREATE TABLE item(
 ITE_ID INT NOT NULL AUTO_INCREMENT,
 ITE_NOM VARCHAR(100) NOT NULL,
 ITE_PRIX DOUBLE NOT NULL,
 ITE_CAPACITE VARCHAR(100) NOT NULL,
 ITE_ATT INT SIGNED NOT NULL,
 ITE_DEF INT SIGNED NOT NULL,
 ITE_ESQ INT SIGNED NOT NULL,
 ITE_VIT INT SIGNED NOT NULL,
 ITE_SOPRAMON_ID INT NOT NULL,
 PRIMARY KEY (ITE_ID)
) ENGINE = InnoDb;

CREATE TABLE achat(
 ACH_ID INT NOT NULL AUTO_INCREMENT,
 ACH_DATE DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
 ACH_PRIX DOUBLE NOT NULL,
 ACH_SOP_ID INT NOT NULL,
 ACH_ITEM_ID INT NOT NULL,
 PRIMARY KEY (ACH_ID)
) ENGINE = InnoDb;
​
CREATE TABLE signe(
 SIG_ID INT NOT NULL AUTO_INCREMENT,
 SIG_NOM VARCHAR(100) NOT NULL,
 SIG_TYPE VARCHAR(100) NOT NULL,
 PRIMARY KEY (SIG_ID)
) ENGINE = InnoDb;
​
​
​
ALTER TABLE sopramon
 ADD CONSTRAINT FK_sopCap
 FOREIGN KEY (SOP_CAPACITE_ID)
 REFERENCES capacite(CAP_ID)
 ON DELETE CASCADE;
​
ALTER TABLE sopramon
 ADD CONSTRAINT FK_sopUt
 FOREIGN KEY (SOP_UT_ID)
 REFERENCES utilisateur(UT_ID)
 ON DELETE CASCADE;
​
ALTER TABLE sopramon
  ADD CONSTRAINT FK_sopSigne
  FOREIGN KEY (SOP_SIGNE_ID)
  REFERENCES signe(SIG_ID)
  ON DELETE CASCADE;
​
 ALTER TABLE sopramon
  ADD CONSTRAINT FK_sopramonCoup
  FOREIGN KEY (SOP_COUP_ID)
  REFERENCES coup(COU_ID)
  ON DELETE CASCADE;

ALTER TABLE item
    ADD CONSTRAINT FK_capitem
    FOREIGN KEY (ITE_SOPRAMON_ID)
    REFERENCES sopramon(SOP_ID)
    ON DELETE CASCADE;
​
ALTER TABLE capacite
    ADD CONSTRAINT FK_modifcapacite
    FOREIGN KEY (CAP_ITEM_ID)
    REFERENCES item(ITE_ID)
    ON DELETE CASCADE;
​
 ALTER TABLE achat
        ADD CONSTRAINT FK_SopramonAchat
        FOREIGN KEY (ACH_SOP_ID)
        REFERENCES sopramon(SOP_ID)
        ON DELETE CASCADE;
​
 ALTER TABLE achat
  ADD CONSTRAINT FK_itemAchat
  FOREIGN KEY (ACH_ITEM_ID)
  REFERENCES item(ITE_ID)
  ON DELETE CASCADE;
​
ALTER TABLE combat
  ADD CONSTRAINT FK_combatBoss
  FOREIGN KEY (COM_BOSS_ID)
  REFERENCES boss(BOSS_ID)
  ON DELETE CASCADE;
​
ALTER TABLE combat
 ADD CONSTRAINT FK_combatSopramon
 FOREIGN KEY (COM_SOPRAMON_ID)
 REFERENCES sopramon(SOP_ID)
 ON DELETE CASCADE;
​
ALTER TABLE combat
 ADD CONSTRAINT FK_combatCoup
 FOREIGN KEY (COM_COUP_ID)
 REFERENCES coup(COU_ID)
 ON DELETE CASCADE;
​
ALTER TABLE boss
  ADD CONSTRAINT FK_bossCap
  FOREIGN KEY (BOSS_CAPACITE_ID)
  REFERENCES capacite(CAP_ID)
  ON DELETE CASCADE;
​
 ALTER TABLE boss
   ADD CONSTRAINT FK_bossCoup
   FOREIGN KEY (BOSS_COUP_ID)
   REFERENCES coup(COU_ID)
   ON DELETE CASCADE;

INSERT INTO sopramon
   	(SOP_NOM,SOP_DATENAIS,SOP_EXPERIENCE,SOP_NIVEAU,SOP_ARGENT,SOP_CAPACITE)
    VALUES
   		('JEREMON','1987-11-02','0','1','100','1'),
   		('LULUMON','1992-01-05','0','1','100','2'),
      ('BRIAMON','1992-02-22','0','1','100','3'),
      ('XAVIMON','1990-03-14','0','1','100','4'),
      ('AUDEMON','1992-08-01','0','1','100','5'),
      ('ARNOMON','1989-06-10','0','1','100','6'),
      ('GUILLEMON','1994-11-19','0','1','100','7'),
      ('SAMUMON','1994-07-22','0','1','100','8'),
      ('EMMAMON','1994-12-11','0','1','100','9'),
   		('LAILAMON','1992-07-23','0','1','100','10');
